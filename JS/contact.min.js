// Your web app's Firebase configuration
var firebaseConfig = {
    apiKey: "AIzaSyANuNA-Re30sMGKAaNJUiBTBwwgwhNy6RY",
    authDomain: "contact-fc690.firebaseapp.com",
    projectId: "contact-fc690",
    storageBucket: "contact-fc690.appspot.com",
    messagingSenderId: "732499686368",
    appId: "1:732499686368:web:aba85abd4833fa8c55f185",
    databaseURL: "https://contact-fc690-default-rtdb.asia-southeast1.firebasedatabase.app/"
  };
  // Initialize Firebase
  firebase.initializeApp(firebaseConfig);

//   Reference contactInfo collections
let contactInfo = firebase.database().ref("infos")

// Listen for a sumbmit 

document.querySelector(".single-form").addEventListener("submit", submitForm);

function submitForm(e) {
    e.preventDefault();

    // Get input values
    let name = document.querySelector(".contact-name").value;
    let email = document.querySelector(".contact-subject").value;
    let message= document.querySelector(".contact-message").value;

    // console.log(name, email, message)

    saveContactInfo(name, email, message);

    document.querySelector("#contactForm").reset();
    // window.location.replace("index.html");

    
    // sendEmail(name, email, message);
}

// Save Infos to firebase
function saveContactInfo(name, email, message) {
    let newContactInfo = contactInfo.push()

    newContactInfo.set({
        name: name,
        email: email,
        message: message,
    });
}

// // Send Email Info
// function sendEmail(name, email, message) {
//     Email.send({
//         Host: "smtp.gmail.com",
//         Username: 'sanjayvihaan111@gmail.com',
//         Password: "dmpbeiteznkiqobm",
//         To: 'sanjayvihaan111@gmail.com',
//         From: `${email}`,
//         Subject: `${name} sent you a message`,
//         Body: `Name üë®‚Äç‚öñÔ∏è : ${name} <br/> Email üìß : ${email} <br/> Message: ${message}`,
//     }).then((_message) => alert("Thank you contacting, I will get back soon"))
// }

function sendMail(parmas) {
    var templ = {
        to_name: 'V Sanjay',
        from_name : document.getElementById("name").value,
        email_id : document.getElementById("email").value,
        message: document.getElementById("message").value,
    };

    emailjs.send('service_aghs6sk','template_vef21au',templ)
    .then(function(res){
        alert("Thank you contacting, I will get back soon", res.status)
    })
}